(()=>{var e={};e.id=698,e.ids=[698],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1132:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Working\\\\NextJs\\\\BaTuyenShop\\\\src\\\\app\\\\admin\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Working\\NextJs\\BaTuyenShop\\src\\app\\admin\\page.tsx","default")},1135:()=>{},1374:(e,r,t)=>{Promise.resolve().then(t.bind(t,4595))},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1683:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6346,23)),Promise.resolve().then(t.t.bind(t,7924,23)),Promise.resolve().then(t.t.bind(t,5656,23)),Promise.resolve().then(t.t.bind(t,99,23)),Promise.resolve().then(t.t.bind(t,8243,23)),Promise.resolve().then(t.t.bind(t,8827,23)),Promise.resolve().then(t.t.bind(t,2763,23)),Promise.resolve().then(t.t.bind(t,7173,23))},1820:e=>{"use strict";e.exports=require("os")},2930:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(5239),n=t(8088),i=t(8170),o=t.n(i),l=t(893),a={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>l[e]);t.d(r,a);let d={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1132)),"D:\\Working\\NextJs\\BaTuyenShop\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"D:\\Working\\NextJs\\BaTuyenShop\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["D:\\Working\\NextJs\\BaTuyenShop\\src\\app\\admin\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3496:e=>{"use strict";e.exports=require("http2")},3604:(e,r,t)=>{"use strict";t.d(r,{db:()=>o});var s=t(7989),n=t(5535);let i=(0,s.Wp)({apiKey:"AIzaSyCN_bgmu28BQ9XJ7YSgm3ixClpPgGbs_JU",authDomain:"batuyenshop.firebaseapp.com",projectId:"batuyenshop",storageBucket:"batuyenshop.firebasestorage.app",messagingSenderId:"676382184894",appId:"1:676382184894:web:d60193ee65d353afa395ef"}),o=(0,n.aU)(i)},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4431:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d,metadata:()=>a});var s=t(7413),n=t(2376),i=t.n(n),o=t(8726),l=t.n(o);t(1135);let a={title:"Ba Tuyen Shop",description:"Cửa h\xe0ng B\xe0 Tuyến - Nơi cung cấp sản phẩm chất lượng",icons:{icon:"/favicon.png"}};function d({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${i().variable} ${l().variable} antialiased`,children:e})})}},4595:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(687),n=t(3210),i=t(3604),o=t(5535);let l=()=>{let[e,r]=(0,n.useState)([]),t=(0,n.useRef)(null),[l,a]=(0,n.useState)(!1),[d,c]=(0,n.useState)({id:"",name:"",description:"",category:"quan-ao",price:0,quantity:0}),[u,p]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let e=(await (0,o.GG)((0,o.rJ)(i.db,"products"))).docs.map(e=>({id:e.id,...e.data()}));r(e),console.log(`Fetched ${e.length} products from Firebase.`)}catch(e){console.error("Error fetching products:",e)}})()},[]);let h=async()=>{try{let t="",s="";if(u){let e=new FileReader;e.readAsDataURL(u);let r=await new Promise((r,t)=>{e.onload=()=>r(e.result),e.onerror=e=>t(e)}),n=await fetch("/api/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:r})}),i=await n.json();if(n.ok)console.log("Image uploaded successfully:",i),t=i.url,s=i.public_id;else throw console.error("Error uploading image:",i.error),Error(i.error||"Failed to upload image")}let n={...d,image:t,public_id:s},l=await (0,o.gS)((0,o.rJ)(i.db,"products"),n);r([...e,{...n,id:l.id}]),a(!1),c({id:"",name:"",description:"",category:"quan-ao",price:0,quantity:0}),p(null)}catch(e){console.error("Error adding product:",e)}},x=async(t,s)=>{try{if(console.log(`Deleted product with ID: ${t} from Firebase.`),console.log(`Deleted product with ID: ${s} from Firebase.`),await (0,o.kd)((0,o.H9)(i.db,"products",t)),s){let e=await fetch("/api/deleteImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({public_id:s})}),r=await e.json();e.ok?console.log(`Deleted image with public_id: ${s} from Cloudinary.`):console.error("Error deleting image from Cloudinary:",r.error)}r(e.filter(e=>e.id!==t))}catch(e){console.error("Error deleting product:",e)}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Danh s\xe1ch sản phẩm"}),(0,s.jsx)("button",{onClick:()=>a(!0),className:"mb-4 px-4 py-2 bg-blue-600 text-white rounded",children:"Th\xeam sản phẩm"}),(0,s.jsxs)("table",{className:"min-w-full bg-white border",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-2 px-4 border-b",children:"T\xean sản phẩm"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b",children:"M\xf4 tả"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b",children:"Gi\xe1"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b",children:"Số lượng"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b",children:"H\xecnh ảnh"}),(0,s.jsx)("th",{className:"py-2 px-4 border-b",children:"H\xe0nh động"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"py-2 px-4 border-b",children:e.name}),(0,s.jsx)("td",{className:"py-2 px-4 border-b",children:e.description}),(0,s.jsxs)("td",{className:"py-2 px-4 border-b",children:[e.price.toLocaleString(),"₫"]}),(0,s.jsx)("td",{className:"py-2 px-4 border-b",children:e.quantity}),(0,s.jsx)("td",{className:"py-2 px-4 border-b",children:e.image?(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-16 h-16 object-cover rounded"}):"No Image"}),(0,s.jsxs)("td",{className:"py-2 px-4 border-b",children:[(0,s.jsx)("button",{className:"mr-2 px-2 py-1 bg-yellow-500 text-white rounded",children:"Sửa"}),(0,s.jsx)("button",{onClick:()=>x(e.id,e.public_id),className:"px-2 py-1 mt-2 bg-red-600 text-white rounded",children:"X\xf3a"})]})]},e.id))})]}),l&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg w-96",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Th\xeam sản phẩm mới"}),(0,s.jsx)("input",{type:"text",placeholder:"T\xean sản phẩm",value:d.name,onChange:e=>c({...d,name:e.target.value}),className:"w-full mb-2 p-2 border rounded"}),(0,s.jsx)("textarea",{placeholder:"M\xf4 tả",value:d.description,onChange:e=>c({...d,description:e.target.value}),className:"w-full mb-2 p-2 border rounded"}),(0,s.jsxs)("select",{value:d.category,onChange:e=>c({...d,category:e.target.value}),className:"w-full mb-2 p-2 border rounded",children:[(0,s.jsx)("option",{value:"quan-ao",children:"Quần \xe1o"}),(0,s.jsx)("option",{value:"thuc-an",children:"Thức ăn chăn nu\xf4i"}),(0,s.jsx)("option",{value:"phan-bon",children:"Ph\xe2n b\xf3n"})]}),"Gi\xe1",(0,s.jsx)("input",{type:"number",placeholder:"Gi\xe1",value:d.price,onChange:e=>c({...d,price:Number(e.target.value)}),className:"w-full mb-2 p-2 border rounded"}),"Số lượng",(0,s.jsx)("input",{type:"number",placeholder:"Số lượng",value:d.quantity,onChange:e=>c({...d,quantity:Number(e.target.value)}),className:"w-full mb-2 p-2 border rounded"}),(0,s.jsx)("button",{onClick:()=>{t.current&&t.current.click()},className:"w-full mb-4 px-4 py-2 bg-blue-600 text-white rounded",children:"Th\xeam h\xecnh ảnh"}),(0,s.jsx)("input",{type:"file",ref:t,onChange:e=>{p(e.target.files?.[0]||null)},className:"hidden"}),u&&(0,s.jsxs)("p",{className:"text-gray-600",children:["Đ\xe3 chọn: ",u.name]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>a(!1),className:"px-4 py-2 bg-gray-300 rounded",children:"Hủy"}),(0,s.jsx)("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Lưu"})]})]})})]})};var a=t(6189);function d(){let[e,r]=(0,n.useState)("products"),t=(0,a.useRouter)();return(0,s.jsxs)("div",{className:"flex min-h-screen bg-gray-100",children:[(0,s.jsxs)("aside",{className:"w-64 bg-white shadow-lg p-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Quản L\xfd"}),(0,s.jsxs)("ul",{className:"space-y-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:()=>r("products"),className:"text-left w-full hover:text-blue-600",children:"Quản l\xfd sản phẩm"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:()=>r("orders"),className:"text-left w-full hover:text-blue-600",children:"Quản l\xfd đơn h\xe0ng"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:()=>r("users"),className:"text-left w-full hover:text-blue-600",children:"Quản l\xfd người d\xf9ng"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:()=>r("reports"),className:"text-left w-full hover:text-blue-600",children:"Thống k\xea v\xe0 b\xe1o c\xe1o"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:()=>r("settings"),className:"text-left w-full hover:text-blue-600",children:"Cấu h\xecnh"})})]})]}),(0,s.jsx)("button",{onClick:()=>t.push("/"),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-auto",style:{position:"absolute",bottom:"16px",left:"16px"},children:"Trở lại"})]}),(0,s.jsxs)("main",{className:"flex-1 p-10",children:["products"===e&&(0,s.jsx)(l,{}),"orders"===e&&(0,s.jsx)("div",{children:"Quản l\xfd đơn h\xe0ng"}),"users"===e&&(0,s.jsx)("div",{children:"Quản l\xfd người d\xf9ng"}),"reports"===e&&(0,s.jsx)("div",{children:"Thống k\xea v\xe0 b\xe1o c\xe1o"}),"settings"===e&&(0,s.jsx)("div",{children:"Cấu h\xecnh"})]})]})}},4631:e=>{"use strict";e.exports=require("tls")},4735:e=>{"use strict";e.exports=require("events")},4891:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6444,23)),Promise.resolve().then(t.t.bind(t,6042,23)),Promise.resolve().then(t.t.bind(t,8170,23)),Promise.resolve().then(t.t.bind(t,9477,23)),Promise.resolve().then(t.t.bind(t,9345,23)),Promise.resolve().then(t.t.bind(t,2089,23)),Promise.resolve().then(t.t.bind(t,6577,23)),Promise.resolve().then(t.t.bind(t,1307,23))},5511:e=>{"use strict";e.exports=require("crypto")},6102:(e,r,t)=>{Promise.resolve().then(t.bind(t,1132))},7366:e=>{"use strict";e.exports=require("dns")},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9770:()=>{},9771:e=>{"use strict";e.exports=require("process")},9858:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[145,87],()=>t(2930));module.exports=s})();